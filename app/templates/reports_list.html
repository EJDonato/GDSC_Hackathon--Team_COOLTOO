<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/incident.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/reports_list.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    {% include 'header.html' %}

    <div class="page-title">
        <h1>Incident Reports List</h1>
        <p>View all urgent and common incident reports submitted by users.</p>
    </div>

    <div class="container">
        <div class="main-panels" style="display: grid; gap: 32px;">
            <!-- Upper Panel: Urgent Incidents -->
            <div class="panel urgent-panel" style="background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.07); padding: 32px 24px;">
                <h2 style="color: #dc2626; margin-bottom: 18px;">Urgent Incidents</h2>
                {% if urgent_reports %}
                    <div style="overflow-x:auto;">
                        <table class="incident-table">
                            <thead>
                                <tr>
                                    <th>Report ID</th>
                                    <th>Status</th>
                                    <th>Location</th>
                                    <th>Date</th>
                                    <th>Details</th>
                                    <th>Image</th>
                                    <th>Full Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for report in urgent_reports %}
                                <tr>
                                    <td>{{ report['unique_report_id'] }}</td>
                                    <td>{{ report['report_status'] }}</td>
                                    <td>{{ report['location'] }}</td>
                                    <td>{{ report['incident_date'] }}</td>
                                    <td>{{ report['details'] }}</td>
                                    <td>
                                        {% if report['image_path'] %}
                                            <img src="{{ url_for('static', filename=report['image_path']) }}" alt="Incident Image" width="80" style="border-radius:6px;">
                                        {% else %}
                                            <span style="color:#aaa;">No image</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ report['full_name'] }}</td>
                                    <td>{{ report['email'] }}</td>
                                    <td>{{ report['phone_number'] }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="info-box"><p>No urgent incidents found.</p></div>
                {% endif %}
            </div>

            <!-- Lower Panel: Common Incidents -->
            <div class="panel common-panel" style="background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.07); padding: 32px 24px;">
                <h2 style="color: #1e3a8a; margin-bottom: 18px;">Common Incidents</h2>
                {% if common_reports %}
                    <div style="overflow-x:auto;">
                        <table class="incident-table">
                            <thead>
                                <tr>
                                    <th>Report ID</th>
                                    <th>Status</th>
                                    <th>Location</th>
                                    <th>Date</th>
                                    <th>Details</th>
                                    <th>Image</th>
                                    <th>Full Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for report in common_reports %}
                                <tr>
                                    <td>{{ report['unique_report_id'] }}</td>
                                    <td>{{ report['report_status'] }}</td>
                                    <td>{{ report['location'] }}</td>
                                    <td>{{ report['incident_date'] }}</td>
                                    <td>{{ report['details'] }}</td>
                                    <td>
                                        {% if report['image_path'] %}
                                            <img src="{{ url_for('static', filename=report['image_path']) }}" alt="Incident Image" width="80" style="border-radius:6px;">
                                        {% else %}
                                            <span style="color:#aaa;">No image</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ report['full_name'] }}</td>
                                    <td>{{ report['email'] }}</td>
                                    <td>{{ report['phone_number'] }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="info-box"><p>No common incidents found.</p></div>
                {% endif %}
            </div>
        </div>
    </div>

    {% include 'short-footer.html' %}
</body>
</html>